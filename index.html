<html>
  <head>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
	<script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.12.4/dist/aframe-extras.min.js"></script>
	<script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
	<!--<script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js">-->
	<script>
      		AFRAME.registerComponent('modify-materials', {
        		init: function () {
         		 	// Wait for model to load.
          			this.el.addEventListener('model-loaded', () => {
					// Grab the mesh / scene.
					const obj = this.el.getObject3D('mesh');
           				// Go over the submeshes and modify materials we want.
            				obj.traverse(node => {
						console.log("Looking by name 008...");
						if (node.name !== -1) {
							console.log("Found Something");
							//node.material.color.set('green');
						}
						if (node.isMesh) {
							console.log("Found a mesh");
						}
						if (node.name == 'GlTF_Test') {
							console.log("Found It By Name... Setting Env Map");
							node.material.emissive.set('#99ff99');
							node.material.src.set('FITCIHDRI.png');
							console.log("Successfully set EnvMap..?");
						}
						/**if (node.name.indexOf('GlTF_Test') !== -1) {
							console.log("Found It by IndexOf");
							node.material.color.set('green');
						}*/
            				});
         			 });
       			 }
      		});
    	</script>
  </head>
  <body>
	
  
    <a-scene stats background="color: black">
		<a-entity position="0 0 3" rotation="0 0 0">
			<a-camera></a-camera>
		</a-entity>
	
	
		<a-assets>
			<!--<img id="boxTexture" src="https://i.imgur.com/mYmmbrp.jpg">-->
			<a-asset-item id="testplate" src="SpinningPlate_002.glb"></a-asset-item>
		</a-assets>
		
	    
	    	<a-entity gltf-model="#testplate" modify-materials></a-entity>
		
		<!--<a-entity environment="preset: forest; dressingAmount: 500"></a-entity>-->
		
		<a-light type="ambient" color="#20303f" intensity="2"></a-light>
		<a-light yellower type="directional" color="#f0e9d0" intensity="3" position="-1 0.7 1"></a-light>
		<a-light bluer type="directional" color="#fff8ff" intensity="1.5" position="1 0 -0.5"></a-light>
		<a-entity light="type: directional; color: #e1e3e4; intensity: 2" position="0 -1 0"></a-entity>
    </a-scene>
	
	<script> console.log(THREE); </script>
  </body>
</html>
